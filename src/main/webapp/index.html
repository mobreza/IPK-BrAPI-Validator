<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>BrAVa - Breeding API Validator</title>
  <meta name="description" content="Breeding API Validator">
  <meta name="author" content="IPK Gatersleben">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="css/sb-admin-2.min.css">
  <link rel="stylesheet" href="css/selectize.bootstrap3.css">
  <link rel="stylesheet" href="css/styles.css?v=1.0">
</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="jumbotron">
          <h1 class="text-center">BrAVa</h1>
          <p class="text-center"><a href="http://www.brapi.org">Breeding API</a> (BrAPI) validator</p>
          <p class="text-center">BrAVa is a tool designed to help developers test servers that comply with the <a href="https://brapi.docs.apiary.io/">BrAPI specifications</a>.</p>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-offset-3 col-md-6" id="formCol">
        <form id="testform" class="well">
          <h2 style="display:inline-block;">Test a BrAPI server</h2>
          <a class="pull-right" id="helpLink">Help</a>
          <div class="form-group">
            <label for="serverurl">
            Server URL
            <span class="glyphicon glyphicon-question-sign" aria-hidden="true"
            data-toggle="tooltip" data-placement="top" title="Enter your own server URL or test the public servers available in the official BrAPI repository."></span>
          </label>
            <select type="url" name="url" id="serverurl" class="form-control" placeholder="Example: https://test.brapi.org/brapi/v1/" required>
            </select>
          </div>
          <div class="form-group">
            <label>
              <input type="radio" name="test" value="structure" checked>
              Structure test: Check structure with <a href="https://github.com/plantbreeding/IPK-BrAPI-Validator/tree/master/src/main/resources/schemas">JSON schemas</a>
            </label>
            <br>
            <label>
              <input type="radio" name="test" value="data">
              Data integrity: Valid structure and data integrity
            </label>
          </div>
          <div class="form-group" id="resourceDiv">
            <label for="testresource">Resource</label>
            <select name="name" id="testresource" class="form-control">
              <option class="del" value="#">/calls</option>
            </select>
          </div>
          <div class="form-group" id="dataTestDiv" style="display: none">
            <label for="dataTest">Data test</label>
            <select name="name" id="dataTest" class="form-control">
              <option value="GermplasmData">Germplasm</option>
              <option value="GermplasmMarketprofilesData">Germplasm/markerprofile</option>
              <option value="MarkersData">Markers</option>
              <option value="TrialsData">Trials</option>
            </select>
          </div>
          <div id="paramListDiv">
          </div>
          <hr>
          <div class="form-group" id="testDescriptionDiv" style="display:none">
            <label for="testDescription">Description</label>
            <span id="testDescription"></span>
          </div> 
          <div class="form-group">
            <label for="fullurl">Tested URL<span id="multiURL"></span></label>
            <br>
            <div id="fullUrl">
              <a target="_blank" href="/calls">/calls</a>
            </div>
          </div>
          <div id="statusBar" class="alert alert-danger hidden" role="alert">...</div>
          <button type="submit" class="btn btn-primary">Test it!</button>
        </form>
      </div>
      <div class="col-md-6" id="helpCol" style="display:none">
        <div class="well">
          <p>BrAVa will call one or multiple resources in the tested server and test the response. </p>
          <p>There are two types of tests available: <strong>structure</strong> tests and <strong>data integrity</strong> tests.</p>
          <p><strong>Structure tests</strong> compare the response to a <a href="http://json-schema.org">JSON schema</a> specific for that resource. The JSON schema compares the structure, parameter name and parameter types of the response object to those defined by the specification.</p>
          <p>For example, the <code>/germplasm-search</code> test requires the response data object to contain a <var>germplasmDbId</var> attribute with a string value, among others.</p>
          <p>We created the JSON schemas using the official BrAPI specifications. They are <a href="https://github.com/plantbreeding/IPK-BrAPI-Validator/tree/master/src/main/resources/schemas">available here</a>, feel free to check them and use them in your own tests.

          <p><strong>Data integrity tests</strong> compare the response to a <a href="http://json-schema.org">JSON schema</a> and <strong>also</strong> make sure the data is consistent across resources. This test works by calling a resource, testing the structure and storing a few values from the response. The specific parameters that are saved depend on the test. The server will make a request to other resources using these values as input.</p>
          <p>The benefits of this type of test is that you can automatically test some resources that would require manual input for certain parameters.</p>
          <p>For example, a call to <code>/markerprofiles</code> could store <var>markerprofileDbId</var>. This value can be used as input for <code>/markerprofiles/{markerprofileDbId}</code>.</p>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-8 col-md-offset-2 hidden" id="resultDiv">
      </div>
    </div>
  </div>
  <footer class="footer">
    <div class="container">
      <p class="text-muted">Â© 2017 | IPK-Gatersleben. This site is licensed under the MIT License. </p>
      <a href="http://www.ipk-gatersleben.de"><img src="http://www.ipk-gatersleben.de/fileadmin/template/main/images-ipk/ipklogo.png" class="footer-logo"></a>
      <a href="https://www.leibniz-gemeinschaft.de/en/home/"><img src="http://www.ipk-gatersleben.de/fileadmin/template/main/images-ipk/sign01.png" class="footer-logo"></a>

    </div>
  </footer>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src="http://spin.js.org/spin.min.js"></script>
  <script src="js/selectize.min.js"></script>
  <script src="js/script.js"></script>
  <!-- Github ribbon -->
  <a href="https://github.com/plantbreeding/IPK-BrAPI-Validator"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>
</body>
</html>